<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Solidarity Action NJ</title>
    <style>
      /* --- BASIC RESET & THEME TOKENS --- */
      *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
      :root{
        --brand:#0d46a0;
        --accent:#ffdd57;
        --text:#222;
        --bg:#f5f7fa;
      }
      body{font-family:system-ui, sans-serif;line-height:1.5;background:var(--bg);color:var(--text);}

      /* --- HEADER / HERO --- */
      header{background:var(--brand);color:#fff;padding:2rem 1rem;text-align:center;position:relative;overflow:hidden;}
      header h1{font-size:clamp(2rem,5vw,4rem);margin-bottom:.5rem;animation:fadeSlide 1s ease-out;}
      header p{opacity:.85;}
      @keyframes fadeSlide{from{opacity:0;transform:translateY(40px);}to{opacity:1;transform:translateY(0);}}
      nav{margin-top:1rem;}
      nav a{color:#fff;text-decoration:none;margin:0 .75rem;font-weight:600;position:relative;}
      nav a::after{content:"";display:block;height:2px;width:0;background:var(--accent);transition:width .3s;}
      nav a:hover::after{width:100%;}

      /* --- LAYOUT --- */
      main{max-width:900px;margin:2rem auto;padding:0 1rem;}
      .card{background:#fff;border-radius:1rem;box-shadow:0 4px 8px rgba(0,0,0,.05);padding:2rem;margin-bottom:2rem;overflow:hidden;}

      /* --- EVENTS GRID --- */
      .events-grid{display:grid;gap:1.5rem;}
      .event{padding:1.5rem;border-left:4px solid var(--brand);border-radius:.5rem;background:#fafafa;transition:transform .2s;}
      .event:hover{transform:translateY(-4px);}
      .event h3{margin-bottom:.25rem;}

      /* --- FOOTER --- */
      footer{background:var(--brand);color:#fff;text-align:center;padding:1rem;margin-top:2rem;font-size:.875rem;}
    </style>
  </head>
  <body>
    <header>
      <h1>Solidarity Action NJ</h1>
      <p>Grass‑roots organizing for mutual aid &amp; justice</p>
      <nav>
        <a href="#about">About</a>
        <a href="#events">Events</a>
        <a href="https://forms.gle/" target="_blank" rel="noopener">Join&nbsp;Us</a>
      </nav>
      <canvas id="hero-canvas" width="800" height="150" style="position:absolute;bottom:0;left:0;width:100%;height:auto;"></canvas>
    </header>

    <main>
      <section id="about" class="card">
        <h2>About Us</h2>
        <p>We are neighbors from across New Jersey building mutual aid networks, organizing direct action, and amplifying marginalized voices. No dues. No bureaucracy. Just solidarity.</p>
      </section>

      <section id="events" class="card">
        <h2>Upcoming Events</h2>
        <div class="events-grid" id="events-grid">
          <!-- events injected by JS -->
        </div>
      </section>
    </main>

    <footer>
      © <span id="year"></span> Solidarity Action NJ • <a href="mailto:info@solidarityactionnj.org" style="color:var(--accent);">Email&nbsp;Us</a>
    </footer>

    <script>
      // --- DYNAMIC YEAR ---
      document.getElementById('year').textContent = new Date().getFullYear();

      // --- SIMPLE PARTICLE BACKGROUND ON HERO ---
      const canvas = document.getElementById('hero-canvas');
      const ctx = canvas.getContext('2d');
      let particles=[];
      function initParticles(){
        particles=[];
        for(let i=0;i<100;i++){
          particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+1,vx:(Math.random()-.5)*0.5,vy:(Math.random()-.5)*0.5});
        }
      }
      function drawParticles(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          ctx.fillStyle='rgba(255,255,255,0.7)';
          ctx.fill();
          p.x+=p.vx; p.y+=p.vy;
          if(p.x<0||p.x>canvas.width)p.vx*=-1;
          if(p.y<0||p.y>canvas.height)p.vy*=-1;
        });
        requestAnimationFrame(drawParticles);
      }
      initParticles();
      drawParticles();

      // --- FETCH EVENTS FROM events.json ---
      fetch('events.json')
        .then(r=>r.json())
        .then(events=>{
          const grid=document.getElementById('events-grid');
          if(!events.length){
            grid.innerHTML='<p>No events scheduled. Check back soon!</p>';
            return;
          }
          events.sort((a,b)=>new Date(a.date)-new Date(b.date));
          events.forEach(evt=>{
            const el=document.createElement('div');
            el.className='event';
            el.innerHTML=`<h3>${evt.title}</h3>
              <p><strong>${new Date(evt.date).toLocaleDateString(undefined,{weekday:'short', month:'short', day:'numeric'})}</strong>&nbsp;&ndash;&nbsp;${evt.location}</p>
              <p>${evt.description}</p>`;
            grid.appendChild(el);
          });
        })
        .catch(()=>{
          document.getElementById('events-grid').innerHTML='<p>Could not load events.</p>';
        });
    </script>
  </body>
</html>
